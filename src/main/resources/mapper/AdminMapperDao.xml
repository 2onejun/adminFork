<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.example.admin.dao.AdminMapper">

    <select id="selectHospListAll" resultType="com.example.admin.dto.HospitalDTO">
        select
            hosp_id as hospId,
            cl_cd   as clCd,
            addr,
            cl_cd_nm as clCdNm,
            emdong_nm as emdongNm,
            estb_dd as estbDd,
            hosp_url as hospUrl,
            post_no as postNo,
            sggu_cd as sgguCd,
            sggu_cd_nm as sgguCdNm,
            sido_cd as sidoCd,
            sido_cd_nm as sidoCdNm,
            telno,
            yadm_nm as yadmNm,
            ykiho,
            hosp_status as hospStatus
        from HOSPITAl
    </select>

    <select id="selectUserListAll" resultType="com.example.admin.dto.UserDTO">
        select
            user_id  as   userId,
            IFNULL(provider_id, '')   as  providerId,
            email  as  email,
            username  as  username,
            phone,
            CONCAT(
            substring(phone, 1, 3),
            '-',
            substring(phone, 4, 4),
            '-',
            substring(phone, 8, 4)
            ) as   phoneStr,
            role   as  role,
            IFNULL(provider, '')  as  provider,
            CONCAT(
            zipcode,
            '-',
            address_line1,
            '-',
            address_line2,
            '-',
            city,
            '-',
            state) as addressStr,
            CASE  status
            WHEN 'ACTIVE' THEN '활동'
            WHEN 'DEACTIVE' THEN '비활동'
            ELSE ''
            END AS status,
            zipcode as   zipcode,
            address_line1  as  addressLine1,
            address_line2  as  addressLine2,
            city  as  city,
            state  as  state,
            IFNULL(DATE_FORMAT(created_at, '%Y-%m-%d'),'') as createdAtStr,
            created_by  as  createdBy,
            IFNULL(DATE_FORMAT(modified_at, '%Y-%m-%d'),'') as modifiedAtStr,
            modified_by  as  modifiedBy
        from USER;
    </select>
<!--병원 예약-->
    <select id="selectHospitalReservationListAll" resultType="com.example.admin.dto.HospitalReservationDTO">
        select
        hosp_reservation_id as hospReservationId,
        IFNULL(DATE_FORMAT(reservation_at, '%Y-%m-%d'),'')  as reservationAtStr,
        reservation_time   as reservationTime,
        IFNULL(DATE_FORMAT(created_at, '%Y-%m-%d'),'') as createdAtStr,
        IFNULL(DATE_FORMAT(modified_at, '%Y-%m-%d'),'') as modifiedAtStr,
        CASE  reservation_status
        WHEN 'SUCCESS' THEN '예약'
        WHEN 'CANCELLED' THEN '취소'
        ELSE ''
        END AS reservationStatus,
        user_id   as userId,
        payment_id  as paymentId,
        hosp_id  as hospId
        from HOSPITAL_RESERVATION;
    </select>


</mapper>

